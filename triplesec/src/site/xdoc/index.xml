<?xml version="1.0" encoding="UTF-8"?>
<document>
  <properties>
    <title>Triplesec Overview</title>
    <author email="akarasulu@apache.org">Alex Karasulu</author>
  </properties>
 
  <head>
    <style type="text/css">
      body { font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; }
      h1 { font-size:18px }
      a:link { color:#33c }
      a:visited { color:#339 }

      div#tipDiv {
        position:absolute; visibility:hidden; left:0; top:0; z-index:10000;
        background-color:#dee7f7; border:1px solid #336;
        padding:4px;
        color:#000; font-size:11px; line-height:1.2;
      }
    </style>

    <script type="text/javascript">

      function doTooltip(e, msg) {
        if ( typeof Tooltip == "undefined" || !Tooltip.ready ) return;
        Tooltip.show(e, msg);
      }

      function hideTip() {
        if ( typeof Tooltip == "undefined" || !Tooltip.ready ) return;
        Tooltip.hide();
      }

      // variables for tooltip content
      var tipProfileEdit   = '<div style="text-align:center"><img src="images/profile-edit.png"   width="360" height="225" alt="" border="0"/></div>';
      var tipClearPin      = '<div style="text-align:center"><img src="images/clear-pin.png"     width="360" height="225" alt="" border="0"/></div>';
      var tipCreateOtp     = '<div style="text-align:center"><img src="images/create-otp.png"    width="360" height="225" alt="" border="0"/></div>';
var tipPinGuard      = '<div style="text-align:center"><img src="images/pin-guard.png"      width="360" height="225" alt="" border="0"/></div>';
var tipPinManagement = '<div style="text-align:center"><img src="images/pin-management.png" width="360" height="225" alt="" border="0"/></div>';
var tipPinReset      = '<div style="text-align:center"><img src="images/pin-reset.png"      width="360" height="225" alt="" border="0"/></div>';
var tipProfileCreate = '<div style="text-align:center"><img src="images/profile-create.png" width="360" height="225" alt="" border="0"/></div>';
var tipProfileList   = '<div style="text-align:center"><img src="images/profile-list.png"   width="360" height="225" alt="" border="0"/></div>';
var tipProfileOps    = '<div style="text-align:center"><img src="images/profile-ops.png"    width="360" height="225" alt="" border="0"/></div>';
var tipProfileView   = '<div style="text-align:center"><img src="images/profile-view.png"   width="360" height="225" alt="" border="0"/></div>';
var tipTopMenu       = '<div style="text-align:center"><img src="images/top-menu.png"       width="360" height="225" alt="" border="0"/></div>';
    </script>
  </head>

  <body>
    <section name="Introduction">
      <p>
        Safehaus is a reliable end-to-end 2-factor authentication platform based 
        on one time passwords generated by Java enabled mobile devices.  These 
        passwords are used with Kerberos 5, the network authentication service,
        to authenticate users.  Safehaus is composed of both a server and J2ME 
        client software for mobile devices.  The mobile devices take the place
        of potentially multiple hardware devices if one were assigned to each 
        user account.
      </p>

      <p>
        Safehaus builds on top of the <a href="http://directory.apache.org">ApacheDS
        </a> which includes an LDAP server and a Kerberos 5 server.  Safehaus contains the
        necessary single signon authentication infrastructure and a directory to manage OTP 
        authentication profiles, a.k.a. user identities.  The J2ME application is also
        part of Safehaus and is used to generate these single use passwords (we refer
        to a Safehaus single use password as a Hauspass).
      </p>

    <subsection name="Architecture">
      <p>
        The big picture architecture is depicted below ...
      </p>

      <center>
        <img src="./images/big-picture.png"/>
      </center>

      <p>
        Kerberos 5 is the core authentication protocol used.  It's what enables SSO, mutual
        authentication and domain trusts between multiple Safehaus servers.  By
        sticking to a standard protocol for authentication like Kerberos we don't have to 
        bend over backwards for interoperability.  Most operating systems, databases, protocols,
        and user applications are Kerberized.  Kerberos 5 is what all the servers in the big 
        picture use to authenticate users and other services.  Users with mobile devices can 
        generate a single use Hauspass based on a standard OTP algorithm using called <a href=
        "http://www.ietf.org/internet-drafts/draft-mraihi-oath-hmac-otp-04.txt">HOTP</a>.  In this
        picture a Palm Pilot is being used as the 2-factor Token instead of a dedicated hardware
        device like SecureId fobs.  Cell phones and other Java enabled devices work as well.  Most
        of our testing actually has been done on the most ubiquitous phone made by Nokia.  Unlike 
        RSA's SecureId token which generates one time passwords these passwords are not time 
        sensitive passwords.  They truely are single use passwords.
      </p>
    </subsection>

    <subsection name="Features, Advantages and Goals">
      <ul>
        <li>
          Server and client are both written in Java which supports most platforms that
          have a 1.4 or higher JVM.
        </li>

        <li>
          Working on support (based on client platform) for Bluetooth, NFC (Near Field 
          Communication), and IrDA for beaming up a Hauspass to Kiosks and enabled 
          workstations.
        </li>
 
        <li>
          No more static passwords.  There's an instant ROI from not having to support user
          password resets for forgotten paswords.  No more rules on having to change
          the password every month.
        </li>

        <li>
          One 2-factor authentication device for all accounts.  No need to have a 
          hardware device for each account/profile.
        </li>

        <li>
          Uses standard proven protocols (Kerberos 5 and LDAPv3) to authenticate and manage users.  
          These servers are open source and are provided by Apache under the ASL 2.0.
        </li>

        <li>
          The platform serves as the foundation for other identity management services 
          without closed home grown solutions invented by an individual or closed team.
          Everything is open and standards based, even the HOTP generation algorithm.  
        </li>

        <li>
          The Kerberos 5 basis supports all Kerberized clients.  The list is huge.  Minimal 
          client customization is rarely need and all clients can partake in this SSO 
          infrastructure.  Trusts between domains (Safehaus') and other Kerberos servers 
          are possible including MIT, Heimdhal, and Microsoft (for w2k domains) Kerberos 
          servers.  The goal is to have seemless integration with these existing Kerberos 
          infrastructure investments.
        </li>
      </ul>
    </subsection>

    <subsection name="Using the Safehaus J2ME Mobile Application">
       <p>
         The mobile J2ME application can be downloaded from your cellphone.  Just 
         navigate to <a href="http://safehaus.org/hauskeys.jad">http://safehaus.org/hauskeys.jad</a> 
         on your java based mobile device and it should prompt to install the client 
         application.  Here's top down flow of the mobile application screens.
       </p>

       <map name="usage-drilldown">
  
         <area shape="rect" alt="Editor for an OTP profile" href="javascript:void"
	       onmouseover="doTooltip(event,tipProfileEdit)" onmouseout="hideTip()" coords="121,358,222,379"/>

         <area shape="rect" alt="Viewer for an OTP profile " href="javascript:void"
               onmouseover="doTooltip(event,tipProfileView)" onmouseout="hideTip()" coords="365,358,465,378"/>

  	 <area shape="rect" alt="Lists all the profiles within the profile store" href="javascript:void"
               onmouseover="doTooltip(event,tipProfileList)" onmouseout="hideTip()" coords="243,280,344,301"/>

         <area shape="rect" alt="Creates an account profile for OTPs" href="javascript:void"
               onmouseover="doTooltip(event,tipProfileCreate)" onmouseout="hideTip()" coords="0,280,100,301"/>

         <area shape="rect" alt="Clears the pin and everything else in system!" href="javascript:void"
               onmouseover="doTooltip(event,tipClearPin)" onmouseout="hideTip()" coords="641,279,740,300"/>

         <area shape="rect" alt="Menu of Ops on Guard PIN" href="javascript:void"
               onmouseover="doTooltip(event,tipPinManagement)" onmouseout="hideTip()" coords="524,193,624,214"/>

         <area shape="rect" alt="Creates a One Time Password (Hauspass)" href="javascript:void"
               onmouseover="doTooltip(event,tipCreateOtp)" onmouseout="hideTip()" coords="326,222,428,242"/>

         <area shape="poly" alt="Reset PIN" href="javascript:void" onmouseover="doTooltip(event,tipPinReset)"
               onmouseout="hideTip()" coords="409,280,498,280,498,288,509,287,509,300,408,300"/>

         <area shape="poly" alt="Profile Management Menu" href="javascript:void" onmouseover="doTooltip(event,tipProfileOps)"
               onmouseout="hideTip()" coords="126,192,124,212,225,212,224,200,214,200,214,192"/>

         <area shape="rect" alt="PIN Guard" href="javascript:void" onmouseover="doTooltip(event,tipPinGuard)"
               onmouseout="hideTip()" coords="499,265,519,286"/>

         <area shape="rect" alt="PIN Guard" href="javascript:void" onmouseover="doTooltip(event,tipPinGuard)"
               onmouseout="hideTip()" coords="418,144,438,164"/>

         <area shape="rect" alt="PIN Guard" href="javascript:void" onmouseover="doTooltip(event,tipPinGuard)"
               onmouseout="hideTip()" coords="214,177,236,199"/>

         <area shape="rect" alt="Topmost Menu" href="javascript:void" onmouseover="doTooltip(event,tipTopMenu)" 
               onmouseout="hideTip()" coords="328,0,428,20"/>
       </map>

       <center>
         <img usemap="usage-drilldown" src="images/useage-patterns.png" border="0" alt=""></img>
       </center>

       <!-- place these just before close body tag -->
       <script src="js/dw_event.js"    type="text/javascript"></script>
       <script src="js/dw_viewport.js" type="text/javascript"></script>
       <script src="js/dw_tooltip.js"  type="text/javascript"></script>

    </subsection>

    </section>

  </body>
</document>

