<?xml version="1.0" encoding="ISO-8859-1"?>
<project>
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <groupId>org.apache.ldap.server</groupId>
    <artifactId>build</artifactId>
    <version>0.9.4-SNAPSHOT</version>
  </parent>
  <artifactId>org.apache.ldap.server.core.unit</artifactId>
  <name>apacheds-core-unit</name>
  <packaging>jar</packaging>  
  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>provided</scope>
    </dependency>

    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>nlog4j</artifactId>
      <version>1.2.17</version>
      <scope>provided</scope>
    </dependency>

    <dependency>
      <groupId>commons-io</groupId>
      <artifactId>commons-io</artifactId>
      <version>1.0</version>
    </dependency>

    <dependency>
      <groupId>org.apache.ldap.server</groupId>
      <artifactId>org.apache.ldap.server.core</artifactId>
      <version>0.9.4-SNAPSHOT</version>
    </dependency>  
  </dependencies>
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
          <source>1.4</source>
          <target>1.4</target>
        </configuration>
      </plugin>
    </plugins>
  </build>

  <profiles>
  	<profile>
  	  <id>no-regression-tests</id>
  	  <activation>
  	  	<activeByDefault>true</activeByDefault>
  	  </activation>
  	  <build>
  	    <plugins>
          <plugin>
            <artifactId>maven-surefire-plugin</artifactId>
            <configuration>
              <excludes>
                <!-- TODO
                   Need to rename all regression tests to have Regression
                   in the name of the test so we can change the exclude below
                   to only refer to these tests rather than all tests like so:
                
                   <exclude>**/*Regression*Test*</exclude>
                 -->
                <exclude>**/*Test.java</exclude>
              </excludes>
            </configuration>
          </plugin>
          <plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>
              <execution>
                <phase>validate</phase>
                <configuration>
                  <tasks>
                    <echo>
=================================================================
                          W A R N I N G
                          -------------
                  
Regression tests have been disabled.  To enable regression tests
run maven with the -Dregressions switch or -P regressions switch.
=================================================================
                    </echo>
                  </tasks>
                </configuration>
                <goals>
                  <goal>run</goal>
                </goals>
              </execution>
            </executions>
          </plugin>
   	    </plugins>
      </build>
	</profile>
  	<profile>
      <id>regressions</id>
      <activation>
        <property><name>regressions</name></property>
      </activation>
  	</profile>
  </profiles>
</project>

